<html>
<head>
  <title>jqueryPage</title>
  <!-- IMPORTED BOOTSTRAP AND JQUERY -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
</head>
  
  <body>

    <!-- NAVIGATION BAR -->
    <nav class="navbar navbar-inverse" style="background-color:#421221; height:64px; padding-top:5px;">
      <div class="container-fluid">
      <div class="navbar-header">
        <a class="navbar-brand" href="#">WebSiteName</a>
      </div>
        <ul class="nav navbar-nav">
          <li><a href="index.html">Home</a></li>
          <li><a href="#">JQuery API page</a></li>
          <li><a href="searchTest.html">Search</a></li>
          <li><a href="#">Page 3</a></li>
        </ul>
      </div>
    </nav>

    <!-- HEADER API PAGE -->
    <div class="row"> 
      <div class="col-md-5"></div>
      <div class="col-md-7"><h3> GATHER INFO </h3> </div>
    </div>
    <div class="row">
      <div class="col-md-5"></div>
      <div class="col-md-7"> 
        <button type="button" class="btn btn-success" onclick="loadXMLDoc()">load</button> </div>
    </div>

    <!-- TEMPERATURE VALUES DISPLAYED ON SCREEN -->
    <div class="row">
      <div class="col-md-5"></div>
      <div class="col-md-7"> <p id="demo"></p> </div>
    </div>

<script>
function loadXMLDoc() {
  //xmlhttp object
  var xmlhttp = new XMLHttpRequest();
  xmlhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      //gather temperature values and display them to the screen
      myFunction(this);
    }
  };
  //xml data from yr.no's webpage (Stockholm lat, long)
  var api_uri = "https://api.met.no/weatherapi/locationforecast/1.9/?lat=59.3293&lon=18.0686";
  //use http GET to acquire data
  xmlhttp.open("GET", api_uri, true);
  xmlhttp.send();
}

function myFunction(xml) {
  var x, i, xmlDoc, txt, tim, from, to;
  xmlDoc = xml.responseXML;
  txt = "";
  //loop through the XML files looking for temperatures
  tim = xmlDoc.getElementsByTagName("time");
  temp = xmlDoc.getElementsByTagName("temperature");

  //FIX: there is no attribute at certain i's, need to change this
  //1 value for now
  for( i = 0; i<tim.length; i++ ) {
    if(i==1){
      break;
    }
    from = tim[i].getAttribute("from");
    to = tim[i].getAttribute("to");
    if( from === to ) {
      var str = tim[i].getAttribute("from");
      var date = str.substring(0, 10);
      var tim = str.substring(11, 16);
      txt += "Stockholm " + date + " , " + tim + " -- " + temp[i].getAttribute("value") + " degrees celsius";
    }
  }
  
  //use the DOM to display the data to the HTML
  document.getElementById("demo").innerHTML = txt;
}
</script>


</body>
</html>